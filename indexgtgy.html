
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrossRealm Gaming - Enhanced Multi-Token Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        :root {
            --primary: #4e54c8;
            --secondary: #f39c12;
            --accent: #4ecdc4;
            --bitcoin: #f7931e;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --dark: #1a1c2c;
            --darker: #0f0f1a;
            --glass: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        body {
            background: linear-gradient(135deg, var(--dark), var(--darker));
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Enhanced Header */
        .header {
            background: rgba(26, 28, 44, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .platform-badge {
            background: linear-gradient(45deg, var(--success), #27ae60);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Multi-Token Wallet Display */
        .wallet-display {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .token-balance {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            background: var(--glass);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            min-width: 80px;
        }

        .token-amount {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text);
        }

        .token-symbol {
            font-size: 0.7rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .connect-wallet-btn {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connect-wallet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(78, 84, 200, 0.3);
        }

        /* Enhanced Navigation */
        .nav-container {
            background: rgba(15, 15, 26, 0.8);
            backdrop-filter: blur(15px);
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
            overflow-x: auto;
        }

        .nav-item {
            padding: 12px 24px;
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-color: var(--primary);
            box-shadow: 0 5px 20px rgba(78, 84, 200, 0.3);
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
            display: flex;
            gap: 30px;
        }

        .content-area {
            flex: 1;
        }

        .sidebar {
            width: 350px;
            background: var(--glass);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            height: fit-content;
            position: sticky;
            top: 120px;
        }

        /* Enhanced Game Lobby */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-lobby {
            background: var(--glass);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            margin-bottom: 30px;
        }

        .lobby-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .lobby-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text);
        }

        .lobby-stats {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Enhanced Game Cards */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--bitcoin));
        }

        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(78, 84, 200, 0.2);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .game-type {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text);
        }

        .game-icon {
            font-size: 2rem;
        }

        .stake-display {
            background: rgba(247, 147, 30, 0.1);
            border: 1px solid rgba(247, 147, 30, 0.3);
            border-radius: 10px;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stake-amount {
            font-weight: 700;
            color: var(--bitcoin);
        }

        .token-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
        }

        .token-icon.btc { background: #f7931e; }
        .token-icon.core { background: #4e54c8; }
        .token-icon.sbtc { background: #5546ff; }
        .token-icon.wbtc { background: #f7931e; }

        .game-info {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .game-features {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .feature-tag {
            background: rgba(78, 205, 196, 0.2);
            color: var(--accent);
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .game-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #c0392b);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Enhanced Create Game Section */
        .create-game-section {
            background: var(--glass);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .game-type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-type-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .game-type-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent);
            transform: translateY(-5px);
        }

        .game-type-card.selected {
            border-color: var(--accent);
            background: rgba(78, 205, 196, 0.1);
            box-shadow: 0 0 30px rgba(78, 205, 196, 0.3);
        }

        .game-type-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .game-type-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 10px;
        }

        .game-type-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .game-type-features {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        /* Enhanced Token Selection */
        .token-selector {
            margin: 30px 0;
        }

        .token-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .token-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .token-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .token-option.selected {
            border-color: var(--bitcoin);
            background: rgba(247, 147, 30, 0.1);
        }

        .token-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }

        .token-name {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 5px;
        }

        .token-balance-display {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .stake-input-section {
            margin: 25px 0;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
            font-size: 0.9rem;
        }

        .stake-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .stake-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
        }

        .stake-presets {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 16px;
            color: var(--text);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .preset-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        /* Enhanced Sidebar */
        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .live-stats {
            display: grid;
            gap: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Tournament Section */
        .tournament-section {
            background: linear-gradient(135deg, rgba(241, 156, 15, 0.1), rgba(230, 126, 34, 0.05));
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(241, 156, 15, 0.2);
            margin-bottom: 30px;
        }

        .tournament-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .tournament-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .tournament-status {
            background: rgba(241, 156, 15, 0.2);
            color: var(--secondary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .tournament-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .tournament-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .tournament-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Game Windows Enhanced */
        .game-window {
            position: fixed;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1200px;
            height: 90vh;
            background: rgba(26, 28, 44, 0.98);
            border: 2px solid var(--accent);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            z-index: 2000;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .game-window.active {
            display: flex;
            animation: gameWindowSlide 0.5s ease;
        }

        @keyframes gameWindowSlide {
            from { opacity: 0; transform: translateX(-50%) scale(0.9); }
            to { opacity: 1; transform: translateX(-50%) scale(1); }
        }

        .game-window-header {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .game-window-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
        }

        .window-controls {
            display: flex;
            gap: 10px;
        }

        .window-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .minimize-btn {
            background: var(--warning);
            color: white;
        }

        .close-btn {
            background: var(--danger);
            color: white;
        }

        .window-btn:hover {
            transform: scale(1.1);
        }

        .game-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
                gap: 20px;
            }

            .sidebar {
                width: 100%;
                order: -1;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }

            .game-type-selector {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .wallet-display {
                flex-wrap: wrap;
                justify-content: center;
            }

            .nav-content {
                justify-content: flex-start;
            }

            .main-container {
                padding: 20px 15px;
            }

            .game-window {
                width: 100%;
                height: 100vh;
                top: 0;
                border-radius: 0;
            }
        }

        /* Loading and Animation States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Success/Error States */
        .success-state {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid rgba(46, 204, 113, 0.3);
            color: var(--success);
        }

        .error-state {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            color: var(--danger);
        }

        .warning-state {
            background: rgba(241, 196, 15, 0.1);
            border: 1px solid rgba(241, 196, 15, 0.3);
            color: var(--warning);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 28, 44, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            backdrop-filter: blur(15px);
            z-index: 3000;
            min-width: 300px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <!-- Enhanced Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <h1>CrossRealm</h1>
                <div class="platform-badge">Enhanced Multi-Token</div>
            </div>
            
            <!-- Multi-Token Wallet Display -->
            <div class="wallet-display" id="walletDisplay">
                <div class="token-balance">
                    <div class="token-amount" id="btcBalance">0.000</div>
                    <div class="token-symbol">BTC</div>
                </div>
                <div class="token-balance">
                    <div class="token-amount" id="coreBalance">0.000</div>
                    <div class="token-symbol">CORE</div>
                </div>
                <div class="token-balance">
                    <div class="token-amount" id="sbtcBalance">0.000</div>
                    <div class="token-symbol">sBTC</div>
                </div>
                <div class="token-balance">
                    <div class="token-amount" id="wbtcBalance">0.000</div>
                    <div class="token-symbol">WBTC</div>
                </div>
                <button class="connect-wallet-btn" id="connectWalletBtn" onclick="connectMultiChainWallet()">
                    Connect Multi-Chain
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Navigation -->
    <div class="nav-container">
        <div class="nav-content">
            <div class="nav-item active" data-section="lobby">Game Lobby</div>
            <div class="nav-item" data-section="create">Create Game</div>
            <div class="nav-item" data-section="tournaments">Tournaments</div>
            <div class="nav-item" data-section="leaderboard">Leaderboard</div>
            <div class="nav-item" data-section="portfolio">Portfolio</div>
            <div class="nav-item" data-section="history">Game History</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Content Area -->
        <div class="content-area">
            <!-- Game Lobby Section -->
            <div id="lobby" class="section active">
                <div class="game-lobby">
                    <div class="lobby-header">
                        <h2 class="lobby-title">Live Game Lobby</h2>
                        <div class="lobby-stats">
                            <div class="stat-item">
                                <div class="status-indicator"></div>
                                <span id="onlinePlayers">247 Players Online</span>
                            </div>
                            <div class="stat-item">
                                <div class="status-indicator"></div>
                                <span id="activeGames">89 Active Games</span>
                            </div>
                            <div class="stat-item">
                                <div class="status-indicator"></div>
                                <span id="totalVolume">156.7 Total Volume</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="games-grid" id="gamesGrid">
                        <!-- Game cards will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Create Game Section -->
            <div id="create" class="section">
                <div class="create-game-section">
                    <h2 class="section-title">Create New Game</h2>
                    
                    <!-- Game Type Selection -->
                    <div class="game-type-selector">
                        <div class="game-type-card" data-type="chess" onclick="selectGameType('chess')">
                            <div class="game-type-icon">‚ôüÔ∏è</div>
                            <div class="game-type-name">Chess Masters</div>
                            <div class="game-type-description">Strategic blockchain chess with full move validation and anti-cheat protection</div>
                            <div class="game-type-features">
                                <span class="feature-tag">5-30 min</span>
                                <span class="feature-tag">ELO Rating</span>
                                <span class="feature-tag">Server Validated</span>
                            </div>
                        </div>
                        
                        <div class="game-type-card" data-type="checkers" onclick="selectGameType('checkers')">
                            <div class="game-type-icon">‚ö´</div>
                            <div class="game-type-name">Checkers Pro</div>
                            <div class="game-type-description">Fast-paced checkers with instant settlements and king promotion mechanics</div>
                            <div class="game-type-features">
                                <span class="feature-tag">3-15 min</span>
                                <span class="feature-tag">Quick Play</span>
                                <span class="feature-tag">Beginner Friendly</span>
                            </div>
                        </div>
                        
                        <div class="game-type-card" data-type="words" onclick="selectGameType('words')">
                            <div class="game-type-icon">üìù</div>
                            <div class="game-type-name">Word Battle</div>
                            <div class="game-type-description">Competitive word-building with dictionary verification and scoring system</div>
                            <div class="game-type-features">
                                <span class="feature-tag">1-5 min</span>
                                <span class="feature-tag">Educational</span>
                                <span class="feature-tag">Dictionary Check</span>
                            </div>
                        </div>
                    </div>

                    <!-- Token Selection -->
                    <div class="token-selector">
                        <label class="input-label">Select Stake Token</label>
                        <div class="token-grid">
                            <div class="token-option" data-token="btc" onclick="selectToken('btc')">
                                <div class="token-logo btc">‚Çø</div>
                                <div class="token-name">Bitcoin</div>
                                <div class="token-balance-display" id="btcBalanceDisplay">0.000 BTC</div>
                            </div>
                            
                            <div class="token-option selected" data-token="core" onclick="selectToken('core')">
                                <div class="token-logo core">‚ö°</div>
                                <div class="token-name">CORE</div>
                                <div class="token-balance-display" id="coreBalanceDisplay">0.000 CORE</div>
                            </div>
                            
                            <div class="token-option" data-token="sbtc" onclick="selectToken('sbtc')">
                                <div class="token-logo sbtc">S</div>
                                <div class="token-name">sBTC</div>
                                <div class="token-balance-display" id="sbtcBalanceDisplay">0.000 sBTC</div>
                            </div>
                            
                            <div class="token-option" data-token="wbtc" onclick="selectToken('wbtc')">
                                <div class="token-logo wbtc">W</div>
                                <div class="token-name">WBTC</div>
                                <div class="token-balance-display" id="wbtcBalanceDisplay">0.000 WBTC</div>
                            </div>
                        </div>
                    </div>

                    <!-- Stake Input -->
                    <div class="stake-input-section">
                        <div class="input-group">
                            <label class="input-label" for="stakeAmount">Stake Amount</label>
                            <input type="number" 
                                   id="stakeAmount" 
                                   class="stake-input" 
                                   placeholder="Enter stake amount" 
                                   min="0.001" 
                                   step="0.001"
                                   oninput="updateCreateButton()">
                        </div>
                        
                        <div class="stake-presets">
                            <div class="preset-btn" onclick="setStakePreset(0.01)">0.01</div>
                            <div class="preset-btn" onclick="setStakePreset(0.1)">0.1</div>
                            <div class="preset-btn" onclick="setStakePreset(0.5)">0.5</div>
                            <div class="preset-btn" onclick="setStakePreset(1.0)">1.0</div>
                            <div class="preset-btn" onclick="setStakePreset(5.0)">5.0</div>
                        </div>
                    </div>

                    <button class="btn btn-primary" 
                            id="createGameBtn" 
                            onclick="createNewGame()" 
                            disabled 
                            style="width: 100%; padding: 15px; font-size: 1.1rem;">
                        Select Game Type & Enter Stake
                    </button>
                </div>
            </div>

            <!-- Tournaments Section -->
            <div id="tournaments" class="section">
                <div class="tournament-section">
                    <div class="tournament-header">
                        <h2 class="tournament-title">Live Tournaments</h2>
                        <div class="tournament-status">3 Active</div>
                    </div>
                    
                    <div class="tournament-grid" id="tournamentGrid">
                        <!-- Tournament cards will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div id="leaderboard" class="section">
                <div class="game-lobby">
                    <div class="lobby-header">
                        <h2 class="lobby-title">Leaderboard</h2>
                    </div>
                    
                    <div id="leaderboardContent">
                        <!-- Leaderboard content will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Portfolio Section -->
            <div id="portfolio" class="section">
                <div class="game-lobby">
                    <div class="lobby-header">
                        <h2 class="lobby-title">Gaming Portfolio</h2>
                    </div>
                    
                    <div id="portfolioContent">
                        <!-- Portfolio content will be populated here -->
                    </div>
                </div>
            </div>

            <!-- History Section -->
            <div id="history" class="section">
                <div class="game-lobby">
                    <div class="lobby-header">
                        <h2 class="lobby-title">Game History</h2>
                    </div>
                    
                    <div id="historyContent">
                        <!-- History content will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Sidebar -->
        <div class="sidebar">
            <!-- Live Statistics -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">üî• Live Statistics</h3>
                <div class="live-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalPlayersCount">247</div>
                        <div class="stat-label">Players Online</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="activeGamesCount">89</div>
                        <div class="stat-label">Active Games</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="totalVolumeAmount">156.7</div>
                        <div class="stat-label">Total Volume</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="liveTournaments">3</div>
                        <div class="stat-label">Live Tournaments</div>
                    </div>
                </div>
            </div>

            <!-- Network Status -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">‚ö° Network Status</h3>
                <div class="live-stats">
                    <div class="stat-card success-state">
                        <div class="stat-value">Core</div>
                        <div class="stat-label">Connected</div>
                    </div>
                    
                    <div class="stat-card warning-state">
                        <div class="stat-value">Stacks</div>
                        <div class="stat-label">Testnet</div>
                    </div>
                    
                    <div class="stat-card error-state">
                        <div class="stat-value">Bitcoin</div>
                        <div class="stat-label">Not Connected</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">üìà Recent Activity</h3>
                <div id="recentActivity" class="live-stats">
                    <!-- Activity items will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Game Windows -->
    <div class="game-window" id="gameWindow">
        <div class="game-window-header">
            <div class="game-window-title" id="gameWindowTitle">Game</div>
            <div class="window-controls">
                <button class="window-btn minimize-btn" onclick="minimizeGame()">‚àí</button>
                <button class="window-btn close-btn" onclick="closeGame()">√ó</button>
            </div>
        </div>
        <div class="game-content" id="gameContent">
            <!-- Game content will be loaded here -->
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification">
        <div id="notificationContent"></div>
    </div>

    <script>
        // Enhanced Global State Management
        let crossRealmState = {
            currentSection: 'lobby',
            selectedGameType: null,
            selectedToken: 'core',
            stakeAmount: 0,
            connectedWallets: {
                bitcoin: false,
                core: true, // Demo: Core connected
                stacks: false,
                ethereum: false
            },
            balances: {
                btc: 0.001234,
                core: 247.82,
                sbtc: 0.00567,
                wbtc: 0.00123,
                eth: 1.234,
                usdc: 500.00
            },
            prices: {
                btc: 43600,
                core: 1.234,
                sbtc: 43550, // Pegged to BTC
                wbtc: 43580,
                eth: 2400,
                usdc: 1.00
            },
            gameStats: {
                gamesPlayed: 156,
                gamesWon: 89,
                totalEarnings: 247.82,
                winRate: 57.1,
                favoriteGame: 'chess'
            },
            activeGames: [],
            gameHistory: []
        };

        // Multi-Chain Contract Configuration
        const ENHANCED_CONTRACTS = {
            core: {
                gaming: "0x7af2cB8f93D0a75E0ba39E974B4e968EAe49028A",
                treasury: "0xd8b934580fcE35a11B58C6D73aDeE468a2833fa8",
                tournament: "0x1234567890123456789012345678901234567890"
            },
            stacks: {
                sbtc: "ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM.sbtc-token",
                gaming: "ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM.crossrealm-gaming"
            },
            ethereum: {
                wbtc: "0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",
                gaming: "0x0000000000000000000000000000000000000000" // To be deployed
            }
        };

        // Enhanced Token Configurations
        const TOKEN_CONFIG = {
            btc: {
                name: 'Bitcoin',
                symbol: 'BTC',
                decimals: 8,
                network: 'Bitcoin',
                minStake: 0.001,
                maxStake: 10,
                icon: '‚Çø',
                color: '#f7931e'
            },
            core: {
                name: 'Core',
                symbol: 'CORE',
                decimals: 18,
                network: 'Core',
                minStake: 0.01,
                maxStake: 1000,
                icon: '‚ö°',
                color: '#4e54c8'
            },
            sbtc: {
                name: 'Stacks Bitcoin',
                symbol: 'sBTC',
                decimals: 8,
                network: 'Stacks',
                minStake: 0.001,
                maxStake: 10,
                icon: 'S',
                color: '#5546ff'
            },
            wbtc: {
                name: 'Wrapped Bitcoin',
                symbol: 'WBTC',
                decimals: 8,
                network: 'Ethereum',
                minStake: 0.001,
                maxStake: 10,
                icon: 'W',
                color: '#f7931e'
            }
        };

        // Initialize Enhanced Platform
        document.addEventListener('DOMContentLoaded', function() {
            initializeEnhancedCrossRealm();
            setupEnhancedEventListeners();
            loadLiveData();
            updateAllDisplays();
            generateDemoGames();
            startRealTimeUpdates();
        });

        function initializeEnhancedCrossRealm() {
            console.log('üöÄ Enhanced CrossRealm Gaming Platform Initializing...');
            showNotification('Welcome to Enhanced CrossRealm! Multi-token gaming platform loaded.', 'success');
            
            // Update wallet displays
            updateWalletDisplay();
            updateTokenBalances();
            
            // Set default selections
            selectToken('core');
        }

        function setupEnhancedEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    switchSection(item.dataset.section);
                    updateNavigation(item);
                });
            });

            // Wallet connection
            document.getElementById('connectWalletBtn').addEventListener('click', connectMultiChainWallet);

            // Stake input validation
            const stakeInput = document.getElementById('stakeAmount');
            if (stakeInput) {
                stakeInput.addEventListener('input', validateStakeInput);
            }

            // Auto-refresh data
            setInterval(updateLiveStats, 10000); // Every 10 seconds
        }

        function switchSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Show target section
            const targetSection = document.getElementById(sectionName);
            if (targetSection) {
                targetSection.classList.add('active');
                crossRealmState.currentSection = sectionName;
            }

            // Load section-specific data
            loadSectionData(sectionName);
        }

        function updateNavigation(activeItem) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            activeItem.classList.add('active');
        }

        function loadSectionData(sectionName) {
            switch (sectionName) {
                case 'lobby':
                    refreshGameLobby();
                    break;
                case 'tournaments':
                    loadTournaments();
                    break;
                case 'leaderboard':
                    loadLeaderboard();
                    break;
                case 'portfolio':
                    loadPortfolio();
                    break;
                case 'history':
                    loadGameHistory();
                    break;
            }
        }

        // Multi-Chain Wallet Connection
        async function connectMultiChainWallet() {
            showNotification('Connecting to multi-chain wallets...', 'info');
            
            try {
                // Simulate multi-chain connection
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Update connection states
                crossRealmState.connectedWallets.bitcoin = true;
                crossRealmState.connectedWallets.stacks = true;
                crossRealmState.connectedWallets.ethereum = true;
                
                // Generate demo balances
                crossRealmState.balances.btc = 0.001 + Math.random() * 0.1;
                crossRealmState.balances.sbtc = 0.005 + Math.random() * 0.05;
                crossRealmState.balances.wbtc = 0.001 + Math.random() * 0.01;
                
                updateWalletDisplay();
                updateTokenBalances();
                
                showNotification('Multi-chain wallets connected successfully!', 'success');
                
                // Update button
                const btn = document.getElementById('connectWalletBtn');
                btn.textContent = 'Connected';
                btn.style.background = 'linear-gradient(45deg, var(--success), #27ae60)';
                
            } catch (error) {
                showNotification('Failed to connect wallets: ' + error.message, 'error');
            }
        }

        function updateWalletDisplay() {
            const tokens = ['btc', 'core', 'sbtc', 'wbtc'];
            
            tokens.forEach(token => {
                const balance = crossRealmState.balances[token] || 0;
                const element = document.getElementById(`${token}Balance`);
                if (element) {
                    const decimals = token === 'core' ? 3 : 6;
                    element.textContent = balance.toFixed(decimals);
                }
            });
        }

        function updateTokenBalances() {
            const tokens = ['btc', 'core', 'sbtc', 'wbtc'];
            
            tokens.forEach(token => {
                const balance = crossRealmState.balances[token] || 0;
                const element = document.getElementById(`${token}BalanceDisplay`);
                if (element) {
                    const config = TOKEN_CONFIG[token];
                    const decimals = config.decimals === 18 ? 3 : 6;
                    element.textContent = `${balance.toFixed(decimals)} ${config.symbol}`;
                }
            });
        }

        // Game Type Selection
        function selectGameType(gameType) {
            crossRealmState.selectedGameType = gameType;
            
            // Update UI
            document.querySelectorAll('.game-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`[data-type="${gameType}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            updateCreateButton();
        }

        // Token Selection
        function selectToken(token) {
            crossRealmState.selectedToken = token;
            
            // Update UI
            document.querySelectorAll('.token-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            const selectedOption = document.querySelector(`[data-token="${token}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // Update stake input constraints
            const stakeInput = document.getElementById('stakeAmount');
            if (stakeInput) {
                const config = TOKEN_CONFIG[token];
                stakeInput.min = config.minStake;
                stakeInput.max = config.maxStake;
                stakeInput.step = config.minStake;
            }
            
            updateCreateButton();
        }

        function setStakePreset(amount) {
            const stakeInput = document.getElementById('stakeAmount');
            if (stakeInput) {
                stakeInput.value = amount;
                crossRealmState.stakeAmount = amount;
                updateCreateButton();
            }
        }

        function validateStakeInput() {
            const stakeInput = document.getElementById('stakeAmount');
            const amount = parseFloat(stakeInput.value) || 0;
            
            crossRealmState.stakeAmount = amount;
            
            const token = crossRealmState.selectedToken;
            const config = TOKEN_CONFIG[token];
            const balance = crossRealmState.balances[token] || 0;
            
            // Validation
            let isValid = true;
            let message = '';
            
            if (amount < config.minStake) {
                isValid = false;
                message = `Minimum stake: ${config.minStake} ${config.symbol}`;
            } else if (amount > config.maxStake) {
                isValid = false;
                message = `Maximum stake: ${config.maxStake} ${config.symbol}`;
            } else if (amount > balance) {
                isValid = false;
                message = `Insufficient balance: ${balance.toFixed(6)} ${config.symbol}`;
            }
            
            // Update input styling
            if (isValid) {
                stakeInput.style.borderColor = 'var(--success)';
            } else {
                stakeInput.style.borderColor = 'var(--danger)';
                if (message) {
                    showNotification(message, 'warning');
                }
            }
            
            updateCreateButton();
        }

        function updateCreateButton() {
            const btn = document.getElementById('createGameBtn');
            if (!btn) return;
            
            const hasGameType = crossRealmState.selectedGameType !== null;
            const hasValidStake = crossRealmState.stakeAmount >= TOKEN_CONFIG[crossRealmState.selectedToken].minStake;
            const hasBalance = crossRealmState.stakeAmount <= crossRealmState.balances[crossRealmState.selectedToken];
            
            if (hasGameType && hasValidStake && hasBalance) {
                btn.disabled = false;
                btn.textContent = `Create ${crossRealmState.selectedGameType.charAt(0).toUpperCase() + crossRealmState.selectedGameType.slice(1)} Game (${crossRealmState.stakeAmount} ${TOKEN_CONFIG[crossRealmState.selectedToken].symbol})`;
                btn.style.background = 'linear-gradient(45deg, var(--primary), var(--accent))';
            } else {
                btn.disabled = true;
                if (!hasGameType) {
                    btn.textContent = 'Select Game Type & Enter Stake';
                } else if (!hasValidStake) {
                    btn.textContent = 'Enter Valid Stake Amount';
                } else if (!hasBalance) {
                    btn.textContent = 'Insufficient Balance';
                }
                btn.style.background = '#666';
            }
        }

        // Enhanced Game Creation
        async function createNewGame() {
            if (!crossRealmState.selectedGameType || crossRealmState.stakeAmount <= 0) {
                showNotification('Please select game type and enter stake amount', 'error');
                return;
            }
            
            const token = crossRealmState.selectedToken;
            const config = TOKEN_CONFIG[token];
            
            showNotification(`Creating ${crossRealmState.selectedGameType} game with ${crossRealmState.stakeAmount} ${config.symbol}...`, 'info');
            
            try {
                // Simulate game creation
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const newGame = {
                    id: Date.now().toString(),
                    type: crossRealmState.selectedGameType,
                    creator: 'You',
                    stake: crossRealmState.stakeAmount,
                    token: token,
                    status: 'waiting',
                    createdAt: Date.now(),
                    network: config.network
                };
                
                crossRealmState.activeGames.push(newGame);
                
                // Deduct balance
                crossRealmState.balances[token] -= crossRealmState.stakeAmount;
                updateWalletDisplay();
                updateTokenBalances();
                
                showNotification('Game created successfully!', 'success');
                
                // Reset form
                document.getElementById('stakeAmount').value = '';
                crossRealmState.selectedGameType = null;
                crossRealmState.stakeAmount = 0;
                
                document.querySelectorAll('.game-type-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                updateCreateButton();
                refreshGameLobby();
                
            } catch (error) {
                showNotification('Failed to create game: ' + error.message, 'error');
            }
        }

        // Demo Game Generation
        function generateDemoGames() {
            const demoGames = [
                {
                    id: 'demo1',
                    type: 'chess',
                    creator: 'ChessMaster',
                    stake: 0.05,
                    token: 'core',
                    status: 'waiting',
                    createdAt: Date.now() - 300000,
                    features: ['ELO Rated', 'Anti-Cheat', 'Live Analysis']
                },
                {
                    id: 'demo2',
                    type: 'checkers',
                    creator: 'ProGamer',
                    stake: 0.001,
                    token: 'btc',
                    status: 'waiting',
                    createdAt: Date.now() - 180000,
                    features: ['Quick Play', 'King Promotion', 'Tournament Mode']
                },
                {
                    id: 'demo3',
                    type: 'words',
                    creator: 'WordWizard',
                    stake: 0.002,
                    token: 'sbtc',
                    status: 'waiting',
                    createdAt: Date.now() - 120000,
                    features: ['Dictionary Verified', 'Scoring System', 'Time Challenge']
                }
            ];
            
            crossRealmState.activeGames = [...crossRealmState.activeGames, ...demoGames];
            refreshGameLobby();
        }

        function refreshGameLobby() {
            const gamesGrid = document.getElementById('gamesGrid');
            if (!gamesGrid) return;
            
            if (crossRealmState.activeGames.length === 0) {
                gamesGrid.innerHTML = '<div class="empty-state">No active games. Create one to start playing!</div>';
                return;
            }
            
            gamesGrid.innerHTML = crossRealmState.activeGames.map(game => createGameCard(game)).join('');
        }

        function createGameCard(game) {
            const config = TOKEN_CONFIG[game.token];
            const timeAgo = Math.floor((Date.now() - game.createdAt) / 60000);
            
            return `
                <div class="game-card">
                    <div class="game-header">
                        <div class="game-type">
                            <span class="game-icon">${getGameIcon(game.type)}</span>
                            ${getGameName(game.type)}
                        </div>
                        <div class="stake-display">
                            <div class="token-icon ${game.token}">${config.icon}</div>
                            <span class="stake-amount">${game.stake}</span>
                        </div>
                    </div>
                    
                    <div class="game-info">
                        Created by: <strong>${game.creator}</strong><br>
                        Network: ${config.network}<br>
                        Created: ${timeAgo} minutes ago
                    </div>
                    
                    ${game.features ? `
                        <div class="game-features">
                            ${game.features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                        </div>
                    ` : ''}
                    
                    <div class="game-actions">
                        <button class="btn btn-primary" onclick="joinGame('${game.id}')">
                            Join Game
                        </button>
                        ${game.creator === 'You' ? `
                            <button class="btn btn-danger" onclick="cancelGame('${game.id}')">
                                Cancel
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function getGameIcon(type) {
            const icons = {
                chess: '‚ôüÔ∏è',
                checkers: '‚ö´',
                words: 'üìù'
            };
            return icons[type] || 'üéÆ';
        }

        function getGameName(type) {
            const names = {
                chess: 'Chess Masters',
                checkers: 'Checkers Pro',
                words: 'Word Battle'
            };
            return names[type] || 'Game';
        }

        // Game Actions
        async function joinGame(gameId) {
            const game = crossRealmState.activeGames.find(g => g.id === gameId);
            if (!game) {
                showNotification('Game not found', 'error');
                return;
            }
            
            const config = TOKEN_CONFIG[game.token];
            const balance = crossRealmState.balances[game.token] || 0;
            
            if (balance < game.stake) {
                showNotification(`Insufficient ${config.symbol} balance`, 'error');
                return;
            }
            
            showNotification(`Joining ${getGameName(game.type)} game...`, 'info');
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Deduct stake
                crossRealmState.balances[game.token] -= game.stake;
                updateWalletDisplay();
                updateTokenBalances();
                
                // Remove from lobby
                crossRealmState.activeGames = crossRealmState.activeGames.filter(g => g.id !== gameId);
                refreshGameLobby();
                
                showNotification('Game joined! Opening game window...', 'success');
                
                // Open game window
                setTimeout(() => openGameWindow(game.type, game), 1000);
                
            } catch (error) {
                showNotification('Failed to join game: ' + error.message, 'error');
            }
        }

        function cancelGame(gameId) {
            const game = crossRealmState.activeGames.find(g => g.id === gameId);
            if (game && game.creator === 'You') {
                // Refund stake
                crossRealmState.balances[game.token] += game.stake;
                updateWalletDisplay();
                updateTokenBalances();
                
                // Remove game
                crossRealmState.activeGames = crossRealmState.activeGames.filter(g => g.id !== gameId);
                refreshGameLobby();
                
                showNotification('Game cancelled and stake refunded', 'success');
            }
        }

        function openGameWindow(gameType, gameData) {
            const gameWindow = document.getElementById('gameWindow');
            const gameTitle = document.getElementById('gameWindowTitle');
            const gameContent = document.getElementById('gameContent');
            
            if (!gameWindow || !gameTitle || !gameContent) return;
            
            gameTitle.textContent = `${getGameName(gameType)} - ${TOKEN_CONFIG[gameData.token].symbol} ${gameData.stake}`;
            
            // Generate game-specific content
            gameContent.innerHTML = generateGameContent(gameType, gameData);
            
            gameWindow.classList.add('active');
            
            // Initialize game logic
            initializeGameLogic(gameType);
        }

        function generateGameContent(gameType, gameData) {
            switch (gameType) {
                case 'chess':
                    return generateChessContent(gameData);
                case 'checkers':
                    return generateCheckersContent(gameData);
                case 'words':
                    return generateWordGameContent(gameData);
                default:
                    return '<div>Game content loading...</div>';
            }
        }

        function generateChessContent(gameData) {
            return `
                <div style="display: flex; gap: 20px; height: 100%;">
                    <!-- Chess Board -->
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; width: 480px; height: 480px; border: 2px solid var(--accent); border-radius: 10px; background: #8b4513; padding: 10px;">
                            ${generateChessBoard()}
                        </div>
                        
                        <div style="margin-top: 20px; display: flex; gap: 15px;">
                            <button class="btn btn-secondary" onclick="offerDraw()">Offer Draw</button>
                            <button class="btn btn-danger" onclick="resignGame()">Resign</button>
                            <button class="btn btn-primary" onclick="requestAnalysis()">Analyze</button>
                        </div>
                    </div>
                    
                    <!-- Game Info Panel -->
                    <div style="width: 300px; display: flex; flex-direction: column; gap: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Game Status</h3>
                            <div style="margin-bottom: 10px;">
                                <strong>Stake:</strong> ${gameData.stake} ${TOKEN_CONFIG[gameData.token].symbol}
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Network:</strong> ${TOKEN_CONFIG[gameData.token].network}
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Your Color:</strong> <span id="playerColor">White</span>
                            </div>
                            <div style="margin-bottom: 10px;">
                                <strong>Turn:</strong> <span id="currentTurn">White to move</span>
                            </div>
                            <div>
                                <strong>Time:</strong> <span id="gameTimer">10:00</span>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Move History</h3>
                            <div id="moveHistory" style="max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 0.9rem;">
                                Game started...
                            </div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Chat</h3>
                            <div id="gameChat" style="max-height: 150px; overflow-y: auto; margin-bottom: 10px; font-size: 0.9rem;">
                                <div style="color: var(--text-secondary);">Game started! Good luck!</div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" id="chatInput" placeholder="Type message..." 
                                       style="flex: 1; padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;">
                                <button class="btn btn-primary" onclick="sendChatMessage()" style="padding: 8px 12px;">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateChessBoard() {
            const pieces = {
                // White pieces (bottom)
                '7-0': '‚ôñ', '7-1': '‚ôò', '7-2': '‚ôó', '7-3': '‚ôï', '7-4': '‚ôî', '7-5': '‚ôó', '7-6': '‚ôò', '7-7': '‚ôñ',
                '6-0': '‚ôô', '6-1': '‚ôô', '6-2': '‚ôô', '6-3': '‚ôô', '6-4': '‚ôô', '6-5': '‚ôô', '6-6': '‚ôô', '6-7': '‚ôô',
                // Black pieces (top)
                '0-0': '‚ôú', '0-1': '‚ôû', '0-2': '‚ôù', '0-3': '‚ôõ', '0-4': '‚ôö', '0-5': '‚ôù', '0-6': '‚ôû', '0-7': '‚ôú',
                '1-0': '‚ôü', '1-1': '‚ôü', '1-2': '‚ôü', '1-3': '‚ôü', '1-4': '‚ôü', '1-5': '‚ôü', '1-6': '‚ôü', '1-7': '‚ôü'
            };
            
            let boardHTML = '';
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const isLight = (row + col) % 2 === 0;
                    const piece = pieces[`${row}-${col}`] || '';
                    const squareId = `square-${row}-${col}`;
                    
                    boardHTML += `
                        <div id="${squareId}" 
                             class="chess-square ${isLight ? 'light' : 'dark'}" 
                             data-row="${row}" 
                             data-col="${col}"
                             onclick="handleSquareClick(${row}, ${col})"
                             style="
                                 background: ${isLight ? '#f0d9b5' : '#b58863'};
                                 display: flex;
                                 align-items: center;
                                 justify-content: center;
                                 font-size: 2.5rem;
                                 cursor: pointer;
                                 transition: background-color 0.2s;
                                 border-radius: 4px;
                             ">
                            ${piece}
                        </div>
                    `;
                }
            }
            return boardHTML;
        }

        function generateCheckersContent(gameData) {
            return `
                <div style="display: flex; gap: 20px; height: 100%;">
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; width: 480px; height: 480px; border: 2px solid var(--accent); border-radius: 10px; background: #8b4513; padding: 10px;">
                            ${generateCheckersBoard()}
                        </div>
                        
                        <div style="margin-top: 20px; display: flex; gap: 15px;">
                            <button class="btn btn-secondary" onclick="showPossibleMoves()">Show Moves</button>
                            <button class="btn btn-danger" onclick="resignGame()">Resign</button>
                        </div>
                    </div>
                    
                    <div style="width: 300px; display: flex; flex-direction: column; gap: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Game Status</h3>
                            <div><strong>Stake:</strong> ${gameData.stake} ${TOKEN_CONFIG[gameData.token].symbol}</div>
                            <div><strong>Your Color:</strong> Red</div>
                            <div><strong>Pieces Left:</strong> Red: 12, Black: 12</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateCheckersBoard() {
            let boardHTML = '';
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    const isLight = (row + col) % 2 === 0;
                    const isDark = !isLight;
                    let piece = '';
                    
                    // Add pieces
                    if (isDark) {
                        if (row < 3) {
                            piece = '<div style="width: 80%; height: 80%; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #333, #111); border: 2px solid #000;"></div>';
                        } else if (row > 4) {
                            piece = '<div style="width: 80%; height: 80%; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #dc3545, #a71e2a); border: 2px solid #000;"></div>';
                        }
                    }
                    
                    boardHTML += `
                        <div onclick="handleCheckersClick(${row}, ${col})"
                             style="
                                 background: ${isLight ? '#f0d9b5' : '#b58863'};
                                 display: flex;
                                 align-items: center;
                                 justify-content: center;
                                 cursor: pointer;
                                 border-radius: 4px;
                             ">
                            ${piece}
                        </div>
                    `;
                }
            }
            return boardHTML;
        }

        function generateWordGameContent(gameData) {
            return `
                <div style="display: flex; gap: 20px; height: 100%;">
                    <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <h2 style="color: var(--accent); margin-bottom: 20px;">Round 1 of 3</h2>
                            <div style="font-size: 3rem; font-weight: bold; letter-spacing: 0.5rem; margin-bottom: 20px; font-family: monospace; color: var(--secondary);">
                                BLOCKCHAIN
                            </div>
                            <p style="color: var(--text-secondary);">Make words using the letters above</p>
                        </div>
                        
                        <div style="width: 400px; margin-bottom: 20px;">
                            <input type="text" 
                                   id="wordInput" 
                                   placeholder="Enter your word..." 
                                   style="width: 100%; padding: 15px; font-size: 1.5rem; text-align: center; border-radius: 10px; border: 2px solid var(--accent); background: rgba(255,255,255,0.1); color: white; text-transform: uppercase;"
                                   onkeyup="validateWordInput(event)">
                        </div>
                        
                        <div id="wordValidation" style="height: 30px; color: var(--warning); font-weight: bold; text-align: center;"></div>
                        
                        <div style="display: flex; gap: 15px; margin-bottom: 30px;">
                            <button class="btn btn-primary" onclick="submitWord()">Submit Word</button>
                            <button class="btn btn-secondary" onclick="skipRound()">Skip Round</button>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; width: 400px;">
                            <h4 style="margin: 0 0 10px 0; color: var(--accent);">Submitted Words</h4>
                            <div id="submittedWords" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                <!-- Words will appear here -->
                            </div>
                        </div>
                    </div>
                    
                    <div style="width: 300px; display: flex; flex-direction: column; gap: 20px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Score</h3>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>You:</span>
                                <span style="color: var(--accent); font-weight: bold;" id="playerScore">0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Opponent:</span>
                                <span style="color: var(--danger); font-weight: bold;" id="opponentScore">0</span>
                            </div>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
                            <h3 style="margin: 0 0 15px 0; color: var(--accent);">Time Remaining</h3>
                            <div style="font-size: 2rem; font-weight: bold; text-align: center; color: var(--warning);" id="timeRemaining">2:00</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Game Logic Functions
        function initializeGameLogic(gameType) {
            switch (gameType) {
                case 'chess':
                    initializeChessLogic();
                    break;
                case 'checkers':
                    initializeCheckersLogic();
                    break;
                case 'words':
                    initializeWordGameLogic();
                    break;
            }
        }

        function initializeChessLogic() {
            console.log('Chess game initialized');
            startGameTimer(600); // 10 minutes
        }

        function initializeCheckersLogic() {
            console.log('Checkers game initialized');
            startGameTimer(300); // 5 minutes
        }

        function initializeWordGameLogic() {
            console.log('Word game initialized');
            startGameTimer(120); // 2 minutes per round
        }

        function startGameTimer(seconds) {
            const timerElement = document.getElementById('gameTimer') || document.getElementById('timeRemaining');
            if (!timerElement) return;
            
            const timer = setInterval(() => {
                seconds--;
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerElement.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;
                
                if (seconds <= 0) {
                    clearInterval(timer);
                    handleTimeUp();
                }
            }, 1000);
        }

        function handleSquareClick(row, col) {
            console.log(`Chess square clicked: ${row}, ${col}`);
            // Chess move logic would go here
            addMoveToHistory(`Move: ${String.fromCharCode(97 + col)}${8 - row}`);
        }

        function handleCheckersClick(row, col) {
            console.log(`Checkers square clicked: ${row}, ${col}`);
            // Checkers move logic would go here
        }

        function validateWordInput(event) {
            const input = event.target;
            const word = input.value.trim().toUpperCase();
            const validation = document.getElementById('wordValidation');
            
            if (word.length < 3) {
                validation.textContent = 'Word must be at least 3 letters';
                validation.style.color = 'var(--danger)';
            } else if (!canFormWord(word, 'BLOCKCHAIN')) {
                validation.textContent = 'Cannot form word with available letters';
                validation.style.color = 'var(--danger)';
            } else {
                validation.textContent = 'Ready to submit!';
                validation.style.color = 'var(--success)';
            }
            
            if (event.key === 'Enter') {
                submitWord();
            }
        }

        function canFormWord(word, availableLetters) {
            const available = {};
            for (const letter of availableLetters) {
                available[letter] = (available[letter] || 0) + 1;
            }
            
            for (const letter of word) {
                if (!available[letter] || available[letter] === 0) {
                    return false;
                }
                available[letter]--;
            }
            
            return true;
        }

        function submitWord() {
            const input = document.getElementById('wordInput');
            const word = input.value.trim().toUpperCase();
            
            if (word.length >= 3 && canFormWord(word, 'BLOCKCHAIN')) {
                const score = calculateWordScore(word);
                addSubmittedWord(word, score);
                updatePlayerScore(score);
                input.value = '';
                document.getElementById('wordValidation').textContent = '';
            }
        }

        function calculateWordScore(word) {
            let score = word.length;
            if (word.length > 5) score += (word.length - 5) * 2;
            if (word.includes('Q') || word.includes('X') || word.includes('Z')) score += 5;
            return score;
        }

        function addSubmittedWord(word, score) {
            const container = document.getElementById('submittedWords');
            if (container) {
                const wordElement = document.createElement('div');
                wordElement.style.cssText = 'background: var(--accent); color: white; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem; font-weight: bold;';
                wordElement.textContent = `${word} (${score})`;
                container.appendChild(wordElement);
            }
        }

        function updatePlayerScore(points) {
            const scoreElement = document.getElementById('playerScore');
            if (scoreElement) {
                const currentScore = parseInt(scoreElement.textContent) || 0;
                scoreElement.textContent = currentScore + points;
            }
        }

        function addMoveToHistory(move) {
            const historyElement = document.getElementById('moveHistory');
            if (historyElement) {
                const moveDiv = document.createElement('div');
                moveDiv.textContent = move;
                historyElement.appendChild(moveDiv);
                historyElement.scrollTop = historyElement.scrollHeight;
            }
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const chat = document.getElementById('gameChat');
            
            if (input && chat && input.value.trim()) {
                const messageDiv = document.createElement('div');
                messageDiv.innerHTML = `<strong>You:</strong> ${input.value}`;
                chat.appendChild(messageDiv);
                chat.scrollTop = chat.scrollHeight;
                input.value = '';
            }
        }

        // Game Control Functions
        function offerDraw() {
            showNotification('Draw offer sent to opponent', 'info');
        }

        function resignGame() {
            if (confirm('Are you sure you want to resign?')) {
                showNotification('Game resigned', 'warning');
                closeGame();
            }
        }

        function requestAnalysis() {
            showNotification('Opening position analysis...', 'info');
        }

        function showPossibleMoves() {
            showNotification('Highlighting possible moves...', 'info');
        }

        function skipRound() {
            showNotification('Round skipped', 'info');
        }

        function handleTimeUp() {
            showNotification('Time\'s up!', 'warning');
            closeGame();
        }

        function minimizeGame() {
            const gameWindow = document.getElementById('gameWindow');
            if (gameWindow) {
                gameWindow.style.height = '60px';
                gameWindow.style.overflow = 'hidden';
            }
        }

        function closeGame() {
            const gameWindow = document.getElementById('gameWindow');
            if (gameWindow) {
                gameWindow.classList.remove('active');
            }
        }

        // Live Data Updates
        function loadLiveData() {
            // Simulate fetching real cryptocurrency prices
            updatePrices();
        }

        async function updatePrices() {
            try {
                // In a real implementation, this would fetch from APIs
                const priceUpdates = {
                    btc: 43600 + (Math.random() - 0.5) * 1000,
                    core: 1.234 + (Math.random() - 0.5) * 0.2,
                    sbtc: 43550 + (Math.random() - 0.5) * 1000,
                    wbtc: 43580 + (Math.random() - 0.5) * 1000
                };
                
                Object.assign(crossRealmState.prices, priceUpdates);
                
            } catch (error) {
                console.error('Failed to update prices:', error);
            }
        }

        function updateLiveStats() {
            // Simulate real-time stat updates
            const stats = {
                totalPlayersCount: Math.floor(Math.random() * 50) + 200,
                activeGamesCount: Math.floor(Math.random() * 20) + 70,
                totalVolumeAmount: (Math.random() * 100 + 100).toFixed(1),
                liveTournaments: Math.floor(Math.random() * 3) + 2
            };
            
            Object.keys(stats).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = stats[key];
                }
            });
            
            // Update header stats
            document.getElementById('onlinePlayers').textContent = `${stats.totalPlayersCount} Players Online`;
            document.getElementById('activeGames').textContent = `${stats.activeGamesCount} Active Games`;
            document.getElementById('totalVolume').textContent = `${stats.totalVolumeAmount} Total Volume`;
        }

        function updateAllDisplays() {
            updateWalletDisplay();
            updateTokenBalances();
            updateLiveStats();
        }

        function startRealTimeUpdates() {
            // Update live stats every 10 seconds
            setInterval(updateLiveStats, 10000);
            
            // Update prices every 30 seconds
            setInterval(updatePrices, 30000);
        }

        // Additional Section Loading Functions
        function loadTournaments() {
            console.log('Loading tournaments...');
            // Tournament loading logic would go here
        }

        function loadLeaderboard() {
            console.log('Loading leaderboard...');
            // Leaderboard loading logic would go here
        }

        function loadPortfolio() {
            console.log('Loading portfolio...');
            // Portfolio loading logic would go here
        }

        function loadGameHistory() {
            console.log('Loading game history...');
            // Game history loading logic would go here
        }

        // Notification System
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notificationContent');
            
            if (notification && content) {
                content.textContent = message;
                notification.className = `notification ${type} show`;
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 4000);
            }
        }

        console.log('üéÆ Enhanced CrossRealm Gaming Platform Ready!');
        console.log('ü™ô Multi-token support: BTC, CORE, sBTC, WBTC');
        console.log('üîó Multi-chain integration: Bitcoin, Core, Stacks, Ethereum');
        console.log('üéØ Full gaming suite: Chess, Checkers, Word Games');
    </script>
</body>
</html>
